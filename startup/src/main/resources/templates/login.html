<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" >
<head>
<link rel="stylesheet" th:href="@{/css/styles.css}" type="text/css" />
<title>Login</title>
</head>
<body id="loginPage">
	
	<div class="info" th:if="${param.logout}"> <div class="message">You have been logged out.</div></div>
	<div class="container">
		<div class="column">
			<h2>Login</h2>
			<form id="login-form" method="post" th:action="@{login}">
			
				<div class="error" th:if="${param.error}">Invalid email or password.</div>
				
				<div class="form-group">
					<label for="loginUsername">Email: </label>
					<input  id="loginUsername" type="email" name="email" required/>
				</div>
				
				<div class="form-group">
					<label for="loginPassword">Password: </label>
					<input  id="loginPassword" type="password" name="password" required/>
				</div>
				
				<div class="form-group" >
					<input type="submit" value="Sign In" />
				</div>
			</form>
		</div>
		
		<div class="column">
			<h2>or... Sign Up!</h2>
			<form id="register-form" method="post" th:action="@{register}">
			
				<div class="error" th:if="${param.registrationError}">An error occurred during registration</div>
				
				<div class="form-group">
					<label for="registerUsername">Email: </label>
					<input  id="registerUsername" type="email" name="email" required/>
				</div>
				
				<div class="form-group">
					<label for="registerPassword">Password: </label>
					<input  id="registerPassword" type="password" name="password" required/>
				</div>
				
				<div class="form-group">
					<label for="registerConfirmPassword">Confirm Password: </label>
					<input  id="registerConfirmPassword" type="password" required/>
				</div>
				
				<div class="form-group" >
					<input type="submit" value="Sign Me Up!" />
				</div>
				
				<script>
					// check that password confirmation matches password
					var confirmPasswordListener = function(blurEvent){
						var password = document.getElementById("registerPassword");
						var confirmPassword = document.getElementById("registerConfirmPassword");
						
						if (password.value === confirmPassword.value){
							confirmPassword.classList.remove("invalid");
						}else{
							confirmPassword.classList.add("invalid");
						}
					}
					var confirmPassword = document.getElementById("registerConfirmPassword");
					confirmPassword.addEventListener('blur', confirmPasswordListener);
				</script>
			</form>
		</div>
	</div>
	
</body>
</html>